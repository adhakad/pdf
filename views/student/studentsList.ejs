<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <script src="https://cdn.ckeditor.com/4.9.1/standard/ckeditor.js"></script>
    <style>


  /*---------------------top nav section--------------------*/
  .top-nav{
    background-color: #724ccc;
    width: 100%;
    height:10vh;
    padding: 4%;
    position: fixed;
    z-index: 3;
    border-bottom: 1px solid rgb(173, 175, 189);
    border-top: 2px solid #fff;
   }
/*---------------------overlay section--------------------*/
.overlay{
  background: rgba(0, 0, 0, 0.75);
  width:100%;
  height: 100vh;
  padding: 0;
  display: none;
  font-size: 35px;
  font-weight: 500;
  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.35);
  position: fixed;
  z-index: 10;
}
ul {
  background: #fff;
  width:100%;
  height: 60vh;
  margin-top: 40vh;
  padding: 0;
  display: none;
  font-size: 30px;
  font-weight: 500;
  border-radius:40px 40px 0 0;
  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.35);
  position: fixed;
  z-index: 4;
  padding-top: 150px;
}
ul li {
  margin-right: 40%;
  list-style: none;
  display: block;
  padding: 20px;
  text-align: center;
}
ul li a{
  color: rgb(84, 87, 121);
  border-bottom: 2px solid rgb(190, 189, 189);
}
/*---------------------bottom nav section--------------------*/
.bnav{
    background-color:rgb(251, 250, 252);
    position: fixed;
    width: 100%;
    height:10vh;
    bottom: 0;
    left: 0;
    padding:0;
    padding-top: 1vh;
    border-top: 3px solid rgb(220, 220, 224);
    box-shadow: 0px 1px 3px 0px rgba(0,0,0,0.15);
    z-index: 2;
  }
 .bnav-item{
  position: relative;
  font-size: 31px;
  padding-right: 5%;
  padding-left: 9%;
  margin-top: 20px;
  float: left;
  outline: none;
  display: block;
}
.bnav-link-active{
  color: rgb(105, 96, 116);/*rgb(159, 103, 255)*/
  bottom: 0;
  font-family: Arial, Helvetica, sans-serif;font-size: 32px;letter-spacing: 0.09em;font-weight: 700;
}
.bnav-link{
  color:rgb(139, 131, 153);
  bottom: 0;
  font-family: Arial, Helvetica, sans-serif;font-size: 32px;letter-spacing: 0.09em;font-weight: 700;
}
.fa{
  display: block;
  font-size: 60px;
  text-align: center;
}
.toggle{
  width: 100%;
  margin-top: 18px;
  text-align: right;
  text-align: center;
}
.toggle .menu{
  cursor: pointer;
  color:rgb(139, 131, 153);
  margin-top: 0px;
  font-family: Arial, Helvetica, sans-serif;font-size: 32px;letter-spacing: 0.09em;font-weight: 700;
  }
.kebab{
  cursor: pointer;
  position: relative;
  display: inline-block;
  box-sizing: border-box;
  padding-top: 5px;
  text-align: center;
  text-align: center;
}
.kebab figure{
  width: 12px;
  height: 12px;
  border-radius: 8px;
  background:rgb(139, 131, 153);
  margin: 5px 0;
}
.active{
  display: block;
}
.more-tab{
  display: inline-block;margin-left: 50px;
}



/*********************************dashboard****************************************/
.logo-tag{
  color:#fff;
  margin-left:5%;
  font-family: Arial, Helvetica, sans-serif;font-size: 70px;letter-spacing: 0.01em;
}
span{
color: #000;
font-family: Arial, Helvetica, sans-serif;font-size:80px;letter-spacing: 0.01em;
}
h2{
  font-size: 37px;
  letter-spacing: .025em;
  font-weight: 900;
  color: #483884;
}

h3{
  letter-spacing: .015em;
  font-weight: 700;
  font-size: 32px;
  color:rgb(101, 83, 199);
  margin-top: 50px;
}

      .taskrow{
        height: 500px;
        color:#918f96;
        background-color: #fff;
        border-top: 2px solid rgb(191, 191, 192);
        border-bottom: 3px solid rgb(191, 191, 192);
      }
      .bottom-margin{
        height: 50px;
        background-color:#D0CDD5;
      }
      .toggle-div-margin{
        margin-top: 20px;
      }
      .toggle-base-allow{
        width:75px;height:38px;background-color:rgb(185, 185, 231);z-index: 1;position: absolute;margin-top: 44px;margin-left: 10px;border: 1px solid rgb(177, 166, 218);border-radius:35px 0 0 35px;
      }
      .toggle-base-deny{
        width: 75px;height:38px;background-color: rgb(199, 200, 202);z-index: 1;position: absolute;margin-top: 44px;margin-left: 18px;border: 1px solid rgb(189, 189, 190);border-radius:0 35px 35px 0;
      }
      .toggle-top-allow{
        width: 55px;height: 55px;background-color:rgb(88, 68, 204);z-index: 2;position: relative;margin-top: 35px;border-radius: 50%;box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.30);margin-left: 50px;
      }
      .toggle-top-deny{
        width: 55px;height: 55px;background-color:rgb(244, 244, 245);z-index: 2;position: relative;margin-top: 35px;border-radius: 50%;box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.30); 
      }
      .modal{
        margin-top:30vh;
        right: 12%;
      }
      .modal-content{
        width: 120%;
        height:25vh;
        font-size: 35px;
        padding: 50px;
        border-radius: 15px 15px 15px 15px;
      }
      .modal-btn{
        color: rgb(114, 114, 114);
        font-size: 35px;
        width: 25%;
        border: 2px solid rgb(219, 219, 219);
        border-radius: 8%;
      }
      .img2{
        border:5px solid rgb(117, 107, 252);border-radius:50%;
      }
      .fa-trash-o{
        color:#918f96;font-size:50px;margin-top: 20px;
      }
      h2{
        font-size: 37px;
        letter-spacing: .025em;
        font-weight: 900;
        color: #483884;
      }
      h3{
        letter-spacing: .02em;
        font-weight: 900;
        font-size: 40px;
        color:rgb(101, 83, 199);
        margin-top: 60px;
      }
      h4{
        font-size: 38px;
        font-weight: 500;
        color: rgb(81, 81, 83);
        margin-top: 20px;
      }
      p{
        font-size: 37px;
        font-weight: 100;
        letter-spacing: .025em;
        color: rgb(75, 75, 78);
      }
    </style>

</head>
    <body style="background-color: #D0CDD5;">
      <div class="overlay menu">
        <ul>
         <li></li>
        </ul>
      </div>
      <div class="top-nav clearfix"><h5 class="logo-tag">z<span>o</span>class</h5></div>
        <div style="height: 10vh;"></div> 
      
    <% if(data.length >0){
      data.forEach(function(row){
      %>
        <div class="container-fluid">
          <div class="row"> 
            <div class="cards" style="background-color: #fafafb">
              <div class='taskrow'><div class='col-xs-12'>
                <div class='col-xs-11'>
                  <h4><%= index++ %></h4>
                </div>
                <div class='col-xs-1'>
                  <a data-toggle="modal" data-target="#myModal<%= row.student_id %>"><i class='fa fa-trash-o'></i></a>
                </div>
                <div class='col-xs-12' style='text-align:left;margin-top:10px;margin-bottom:40px;'>
                  <div class='col-xs-12'>
                    <h3><%= row.student_name %></h3>
                  </div>
                </div>
              <% if(row.status==disabled){%>
                <div class='col-xs-12'>
                  <div class='col-xs-10'>
                    <h2>Always Allow Student's Login</h2>
                    <p>Always permission allow for Student's login</p>
                  </div>
                  <div class='col-xs-2'><a class='btn toggle-base-deny'></a>
                    <a class='btn toggle-top-deny' data-toggle="modal" data-target="#myModalStatus<%= row.student_id %>"></a>
                  </div>
                </div>
              <%}else{%>
                <div class='col-xs-12'>
                  <div class='col-xs-10'>
                    <h2>Always Deny Student's Login</h2>
                    <p>Always permission Deny for Student's login</p>
                  </div>
                  <div class='col-xs-2'><a class='btn toggle-base-allow'></a>
                    <a class='btn toggle-top-allow' data-toggle="modal" data-target="#myModalStatus<%= row.student_id %>"></a>
                  </div>
                </div>
                <%}%>
              </div>
            </div>
            <div class='bottom-margin'></div>
          </div>
        </div>
      </div>
            <div class="modal fade" id="myModal<%= row.student_id %>" role="dialog">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title"><%= row.student_name %></h4>
                  </div>
                  <div class="modal-body">
                    <%= row.class_name %>
                  </div>
                  <div class="modal-footer">
                    <a href="#"><h2>Delete access not allow</h2> &nbsp;</a>  
                    <!--<a href="#" class="delete btn btn-danger" id= "<%= row.student_id %>">delete &nbsp;</a>-->  
                  </div>
                </div>
              </div>
            </div>

            <div class="modal fade" id="myModalStatus<%= row.student_id %>" role="dialog">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title"><%= row.student_name %></h4>                                        
                  </div>
                  <div class="modal-body">
                    <%= row.class_name %>
                    <a href="#" id= "<%= row._id %>"><h2>Update access not allow</h2> &nbsp;</a> 
                  </div>
                  <div class="modal-footer">
                    <% if(row.status==disabled){%>
                    <a href="#" style="color: #fff;"  class="update btn " ids= "<%= row.student_id %>">disable</a>
                    <%}else{%>
                      <a href="#" style="color: #fff;"  class="updates btn " idss= "<%= row.student_id %>">enable</a>
                      <%}%>
                  </div>
                </div>
              </div>
            </div>
      
                    <%  }) } %>
              </div>
            </div>

            <nav class="bnav">
              <div class="bnav-item">
              <a class="bnav-link"><i class="fa fa-laptop icon"></i>Admin</a>
              </div>
              <div class="bnav-item">
                <a href="#" class="bnav-link"><i class="fa fa-user"></i>Student</a>
                </div>
              <div class="bnav-item">
              <a href="#" class="bnav-link"><i class="fa fa-cog icon"></i>Setting</a>
              </div>
              <div class="toggle">
              <div class="kebab menu">
                <figure></figure>
                <figure class="middle"></figure>
                <figure></figure>
              </div>
              <div class="menu">More</div>
              </div>
              </nav>

            <script>
              $(document).ready(function () {
                 $(".delete").on('click', function(event) {
                   event.preventDefault()
                   const sid = $(event.target).attr('id')
                   $.ajax({
                     url: '/studentList/delete',
                     method: 'delete',
                     data: {id: sid},
                     success: function(result, status, xhr) {
                      if(result.msg=='success'){
                        location.reload();
                      }  
                     },
                     error: function(xhr, status, error) {
                       console.log('error')
                     }
                   })
                 })

                 $(".update").on('click', function(event) {
                   event.preventDefault()
                   const sids = $(event.target).attr('ids')
                   $.ajax({
                     url: '/studentList/enable',
                     method: 'put',
                     data: {id: sids},
                     success: function(result, status, xhr) {
                      if(result.msg=='success'){
                        location.reload();
                      }
                     },
                     error: function(xhr, status, error) {
                       console.log('error')
                     }
                   })
                 })

                 $(".updates").on('click', function(event) {
                   event.preventDefault()
                   const sidss = $(event.target).attr('idss')
                   $.ajax({
                     url: '/studentList/disable',
                     method: 'put',
                     data: {id: sidss},
                     success: function(result, status, xhr) {
                      if(result.msg=='success'){
                        location.reload();
                      }
                     },
                     error: function(xhr, status, error) {
                       console.log('error')
                     }
                   })
                 })
               })
            </script>            
<script>
  $(document).ready(function(){
  $('.menu').click(function(){
    $('.overlay').toggleClass('active');
    $('ul').toggleClass('active');
  })
  })
  </script>
<div style="height: 150px;"></div>
       </body>
     </html>
     