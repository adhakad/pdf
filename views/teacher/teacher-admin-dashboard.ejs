<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    
    <link type="text/css" rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link type="text/css" rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
    <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
    <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">
    <link type="text/css" rel="stylesheet" href="sty.css">
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <script src="https://cdn.ckeditor.com/4.9.1/standard/ckeditor.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <style>
      .class-subject{
        color: #724ccc;
        font-family: Arial, Helvetica, sans-serif;font-size:50px;font-weight: 500;
      }
      h1{
        color: #fff;
        font-family: Arial, Helvetica, sans-serif;font-size:100px;
      }
      span{
        color: #000;
        font-family: Arial, Helvetica, sans-serif;font-size:115px;
      }
      .lable-height{
        height: 60px!important;
        color: #726180;font-family: Arial, Helvetica, sans-serif;font-size:35px;letter-spacing: .05em;
      }
      .input-height{
        height: 110px!important;
        border: 2px solid #aba1b1;
        border-radius: 15px;
        font-family: Arial, Helvetica, sans-serif;font-size:42px;letter-spacing: .045em;padding-left: 35px;padding-right: 35px;
      }
      .btn-margin-top{
        margin-top: 70px!important;
      }
      .margin-top{
        margin-top: 75px!important;
      }
      .margin-top-logo{
        margin-top: 75px!important;
      }
      .login-btn{
        width: 100%;
        height: 130px;
        background-color: #724ccc!important;
        border-radius: 15px;
        color:#fff;font-family: Arial, Helvetica, sans-serif;font-size:45px;letter-spacing: .05em;
      }
      .delete-btn{
        margin-left: -2%;
        width: 105%;
        height: 130px;
        background-color: #e6218d!important;
        border-radius: 15px;
        color:#fff;font-family: Arial, Helvetica, sans-serif;font-size:45px;letter-spacing: .05em;
      }
      h2{
        color: #5f4272;font-family: Arial, Helvetica, sans-serif;font-size:50px;letter-spacing: .025em;
      }
      a{
        color: #724ccc;font-family: Arial, Helvetica, sans-serif;font-size:20px;letter-spacing: .01em;
      }
     .padding{
        padding-top: 5vh;
        padding-bottom: 8vh;
     }
     .padding-signup{
      padding-top: 1vh;
     }
     .container-padding{
       padding-left: 5%;
       padding-right: 5%;
     }
     h3{
      color: #4f4158;font-family: Arial, Helvetica, sans-serif;font-size:48px;letter-spacing: .025em;
      }
     .signup-span{
      color: #724ccc;border-bottom: 2px solid#724ccc;font-size: 48px;
     }
     .signup-span-g{
      color:#724ccc;font-size: 48px;
     }
     .form-alert{
        height: 150px!important;
        border: 2px solid rgb(238, 16, 153);
        border-radius: 15px;
        color:rgb(238, 16, 153);font-family: Arial, Helvetica, sans-serif;font-size:35px;letter-spacing: .040em;padding-left: 75px;padding-right: 75px;margin-bottom: 50px;
      }
      .select-option{
        font-size: 45px;height: 100px;width: 110%;border: 1px solid transparent;
      }
     
    </style>
    </head>
      <body style="background-color: #724ccc;">
        <div class="container-fluid container-padding">
          <div class="row">
          <div class="col-xs-12">
            <h1 class="text-center margin-top-logo">z<span>o</span>class</h1>
            <div style="margin-top:8vh;" >
            <% if(datas){ %>
              <div class="panel panel-info"><div class="col-xs-12 text-center padding"><h2>Start Or Join Live Class</h2></div>
              <div class="panel-body" style="padding: 10%;">
              
                  <h2 class="text-center class-subject">Class - <%= datas.class_name %>th</h2>
                  <h2 class="text-center class-subject">Subject - <%= datas.subject_name %></h2>
                
                    <form id="userForm1" class="form-horizontal"  role="form">
                      <input type="hidden" class="form-control" id="teacher_id" value="<%= datas.teacher_id %>"> 
                      <div class="form-group btn-margin-top">                                        
                        <div class="col-xs-12">   
                    <% if(datas.teacher_id==datas.exist_id){ %>  
                          <input type="submit" name="submit" value="Join Class" class="btn btn-primary login-btn">   
                    <% }else{%>
                          <input type="submit" name="submit" value="Start Class" class="btn btn-primary login-btn">
                    <% } %>  
                      </div>
                    </div>                         
                      </form>
                      <div class="form-group btn-margin-top">                                        
                        <div class="col-xs-12">
                          <input type="button"  value="Delete Class" class="delete btn btn-primary delete-btn" id= "<%= datas.teacher_id %>">  
                        </div>
                      </div>
            <% }else{%>
              <div class="panel panel-info"><div class="col-xs-12 text-center padding"><h2>Create Live Class</h2></div>
              <div class="panel-body" style="padding: 10%;">
                <form id="userForm" class="form-horizontal"  role="form">  
                  <div style="color: #000;" id="postResultDiv">
                  </div>      
                            

                                  <div class="form-group">
                                    <div class="col-xs-12 input-height" style="display: inline-block;margin-top: 50px;">
                                      <div class="col-xs-11">
                                        <select class="form-control select-option" id="class_name">
                                          <option>---------Select class---------</option>
                                         <% if(allClass.length > 0){ allClass.forEach(function(row){ %>
                                          <option value="<%= row.class_name %>"><%= row.class_name %>th</option>
                                         <%  }) } %>
                                        </select>
                                      </div>
                                      <div class="col-xs-1" style="padding-top: 25px;">
                                        <i style="font-size: 50px;" class="fas fa-caret-down"></i>
                                      </div>
                                    </div> 
                                  </div>
                                  <div class="form-group">
                                    <div class="col-xs-12 input-height" style="display: inline-block;margin-top: 50px;">
                                      <div class="col-xs-11">
                                        <select class="form-control select-option" id="subject_name">
                                          <option>---------Select subject---------</option>
                                          <% if(allSubject.length > 0){ allSubject.forEach(function(row){ %>
                                          <option value="<%= row.subject_name %>"><%= row.subject_name %></option>
                                         <%  }) } %>
                                        </select>
                                      </div>
                                      <div class="col-xs-1" style="padding-top: 25px;">
                                        <i style="font-size: 50px;" class="fas fa-caret-down"></i>
                                      </div>
                                    </div> 
                                  </div>

                                  
                                  <div class="form-group btn-margin-top">                                        
                                    <div class="col-xs-12">
                                      <input type="submit" name="submit" value="Create Class" class="btn btn-primary login-btn">   
                                    </div>
                                  </div>                         
                                    </form>
                                 </div>
                            </div>
                          </div> 
                        </div>
                      </div>
            <% }%>  
<script>
  $( document ).ready(function() {
    $("#userForm").submit(function(event) {
      event.preventDefault();
      ajaxPost();
    });
    function ajaxPost()
    {
      var formData = {
        class_name : $("#class_name").val(),
        subject_name : $("#subject_name").val(),
      }
      $.ajax({
        type : "POST",
        contentType : "application/json",
        url : window.location + "/post",
        data : JSON.stringify(formData),
        dataType : 'json',
        success : function(result, status, xhr) {
          if(result.redirects){
          window.location.href = result.redirects
          }else{
            $("#postResultDiv").html("<div class='form-group'><input type='text' class='form-control form-alert' value='"+result.redirectTo+"'></div>"); 
          }
        },
        error : function(e) {
          console.log('error');
        }
      })              
      resetData();
    }

    function resetData(){
      $("#class_name").val("");
      $("#subject_name").val("");                
    }
  })
</script>
<script>
  $( document ).ready(function() {
    $("#userForm1").submit(function(event) {
      event.preventDefault();
      ajaxPost();
    });
    function ajaxPost()
    {
      var formData = {
        teacher_id : $("#teacher_id").val(),
      }
      $.ajax({
        type : "POST",
        contentType : "application/json",
        url : window.location + "/class-start",
        data : JSON.stringify(formData),
        dataType : 'json',
        success : function(result, status, xhr) {
          if(result.redirects){
          window.location.href = result.redirects
          }else{
            $("#postResultDiv1").html("<div class='form-group'><input type='text' class='form-control form-alert' value='"+result.redirectTo+"'></div>"); 
          }
        },
        error : function(e) {
          console.log('error');
        }
      })              
      resetData();
    }

    function resetData(){
      $("#teacher_id").val("");                
    }
  })
</script>
<script>
  $(document).ready(function () {
     $(".delete").on('click', function(event) {
       event.preventDefault()
       const sid = $(event.target).attr('id')
       $.ajax({
         url: '/teacher-admin-dashboard/delete',
         method: 'delete',
         data: {id: sid},
         success: function(result, status, xhr) {
          window.location.href = result.redirects  
         },
         error: function(xhr, status, error) {
           console.log('error')
         }
       })
     })
 
   })
   </script>
       </body>
</html>
     